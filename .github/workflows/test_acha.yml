name: Test Acha Message

on:
  workflow_dispatch:

jobs:
  run-test:
    runs-on: ubuntu-latest

    env:
      API_ID: ${{ secrets.API_ID }}
      API_HASH: ${{ secrets.API_HASH }}
      PYROGRAM_SESSION_B64: ${{ secrets.PYROGRAM_SESSION_B64 }}

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Install pyrogram
        run: |
          pip install pyrogram tgcrypto

      - name: Run test
        run: python test_acha.py
